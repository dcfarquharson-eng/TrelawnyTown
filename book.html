<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Book - Trelawny Town Maroons</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js" defer></script>
</head>

<body>

    <nav class="navbar">
        <a href="index.html" class="nav-brand">Trelawny Town</a>
        <div class="menu-toggle">&#9776;</div>
        <div class="nav-links">
            <a href="index.html" class="nav-link">Home</a>
            <a href="about.html" class="nav-link">About</a>
            <a href="history.html" class="nav-link">History</a>
            <a href="treaty.html" class="nav-link">Treaty</a>
            <a href="war.html" class="nav-link">The War</a>
            <a href="book.html" class="nav-link active">Book</a>
            <a href="contact.html" class="nav-link">Contact</a>
        </div>
    </nav>

    <div class="hero">
        <div class="hero-container">
            <div class="hero-image-wrapper">
                <span class="hero-caption">Coming 2026<br>A Groundbreaking Work</span>
                <img src="Pictures/cudjoe-guthrie-treaty.jpg" alt="Captain Cudjoe and the Treaty Signing">
            </div>
            <div class="hero-content">
                <h1>The Unconquered</h1>
                <p>"The Untold Story of the Trelawny Town Maroons â€” 40 years of research, finally brought to light."</p>
                <a href="#book-content" class="cta-button">Learn More</a>
            </div>
        </div>
    </div>

    <div class="content-container" id="book-content">

        <div class="book-card">
            <h2>About the Book</h2>
            <p><strong>TrelawnyTown.com</strong> is proud to present a groundbreaking new work of historical
                non-fiction. Drawing on over 40 years of original research, digitised archives, and oral histories, this
                book challenges the colonial narrative of the Second Maroon War.</p>

            <p>We invite you to journey with us from the blood-soaked hills of Jamaica to the frozen exile of Nova
                Scotia, and finally to the shores of Sierra Leone.</p>

            <h3>Featured Chapters:</h3>
            <ul class="chapter-list">
                <li><strong>Chapter 1: The Blood Oath</strong> - The complexity of the 1738 Treaty.</li>
                <li><strong>Chapter 3: The Spark</strong> - The whipping incident that ignited a war.</li>
                <li><strong>Chapter 4: The Ambush</strong> - Colonel Sandford's folly and the Invisible Army.</li>
                <li><strong>Chapter 6: The Betrayal</strong> - Balcarres, Walpole, and the lie that exiled a nation.
                </li>
            </ul>

            <p style="margin-top:2rem; font-style:italic; text-align:center;">Coming 2026.</p>

            <!-- Waitlist Form -->
            <div id="waitlist-section"
                style="margin-top: 2rem; background: rgba(255,255,255,0.05); padding: 20px; border-radius: 4px;">
                <h3 style="margin-top: 0; color: var(--gold-accent);">Join the Trelawny Town Society</h3>
                <p style="font-size: 0.9rem; margin-bottom: 15px;">Enter your email to join the waitlist and receive an
                    exclusive preview of the <strong>Cockpit Country Maps</strong>.</p>

                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <input type="email" id="waitlist-email" placeholder="Your Email Address"
                        style="flex: 1; padding: 12px; border: 1px solid #ccc; border-radius: 2px; font-family: 'Cinzel', serif;">
                    <button onclick="joinWaitlist()" class="cta-button"
                        style="margin-top: 0; border: none; cursor: pointer;">Join Now</button>
                </div>
                <p id="waitlist-msg" style="margin-top: 10px; font-size: 0.9rem; min-height: 20px;"></p>
            </div>
        </div>

    </div>

    <script>
        const API_BASE = "https://backend-deploy-hlq8.onrender.com/api";

        async function joinWaitlist() {
            const emailInput = document.getElementById('waitlist-email');
            const msg = document.getElementById('waitlist-msg');
            const email = emailInput.value.trim();

            if (!email || !email.includes('@')) {
                msg.textContent = "Please enter a valid email address.";
                msg.style.color = "#ff6b6b";
                return;
            }

            msg.textContent = "Joining...";
            msg.style.color = "#ccc";

            try {
                const res = await fetch(`${API_BASE}/trelawny/join_waitlist`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email: email })
                });

                const data = await res.json();

                if (data.status === 'ok') {
                    msg.innerHTML = "<strong>Welcome to the Society.</strong> Check your email for your exclusive preview.";
                    msg.style.color = "var(--gold-accent)";
                    emailInput.value = "";
                } else {
                    msg.textContent = data.message || "Something went wrong.";
                    msg.style.color = "#ff6b6b";
                }
            } catch (e) {
                console.error(e);
                msg.textContent = "Server connection error. Please try again later.";
                msg.style.color = "#ff6b6b";
            }
        }
    </script>

    <footer>
        <p>&copy; 2026 TrelawnyTown.com. Dedicated to the Ancestors.</p>
    </footer>

</body>

</html>